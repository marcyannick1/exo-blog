{% extends 'base.html.twig' %}

{% block title %}Articles
{% endblock %}

{% block body %}
	<style>
		.articles {
			display: flex;
			flex-direction: column;
			gap: 1em
		}
		.article {
			display: flex;
			flex-direction: column;
		}
		.article .categorie {
			color: gray;
			font-size: 0.8em
		}
		.article .titre {
			margin: 0;
		}
		.article .auteur {
			font-size: 0.7em;
			color: gray
		}
		.article .date {
			font-size: 0.7em;
			color: gainsboro
		}
		.article .brouillon {
			font-size: 0.8em;
			color: crimson
		}
		.article .publiÃ© {
			font-size: 0.8em;
			color: teal
		}
	</style>
	<h1>Articles</h1>

	<div class="articles">
		{% for article in articles %}
			<div class="article">
				<span class="categorie">{{article.categorie.titre}}</span>
				<h3 class="titre">
					<a class="titre" href={{path("app_articles_show", {id : article.id} )}}>
						{{article.titre}}
						<a/>
					</h3>
					<span class="auteur">{{article.auteur.nom}}
						{{article.auteur.prenom}}</span>
					<br>
					<span class="date">{{ article.dateDeParution ? article.dateDeParution|date('Y-m-d H:i:s') : '' }}</span>
					{% if is_granted('ROLE_ADMIN') %}
						<span class={{article.etat == "publiÃ©" ? "publiÃ©" : "brouillon"}}>{{article.etat}}</span>
					{% endif %}
				</div>
			{% else %}
				<span>Aucun article existantðŸ˜•</span>
				<br>
			{% endfor %}
		</div>
		{% if is_granted('ROLE_ADMIN') %}
			<a href={{path("app_articles_new")}}>CrÃ©er un nouveau articleâž•</a>
		{% endif %}
	{% endblock %}
